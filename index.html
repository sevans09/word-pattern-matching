<!DOCTYPE html>
<meta charset="utf-8">
<link href="style.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
<script type="text/javascript" src="js/timer.js"></script>
<script type="text/javascript" src="data.json"></script>
<script type="text/javascript" src="js/generatewords.js"></script>
<script type="text/javascript" src="js/setup.js"></script>
<script type="text/javascript" src="js/playgame.js"></script>

<title>Word Slap Jack Solitaire</title>
<h1 class="title">Word Slap Jack Solitaire</h1></br>


<script type="text/javascript">
$(window).on('load',function(){
    $('#myModal').modal('show');
});

$( document ).ready(function() {
    var num_entries = Math.round(Math.random() * 9);
    $("#word").html(dict.words[num_entries].word)
    for (j in dict.words[num_entries].matches) {
        var word = "#word" + j;
        $(word).html(dict.words[num_entries].matches[j])
    }
});
</script>


<div class="modal hide fade" id="myModal">
    <div class="modal-header">
      <h3>Welcome to Word Slap Jack Solitaire!</h3>
    </div>
    <div class="modal-body">
      <p>Find the word that matches the pattern as fast as you can! Score high enough and end up on
          the leaderboard. </p>
    </div>
    <div class="modal-footer">
      <a href="#" id="startbutton" rel="modal:close" onclick="startGame()" class="btn btn-primary">Play!</a>
    </div>
  </div>

<!-- add score here -->
<div class="modal hide fade" id="endModal">
    <div class="modal-header">
      <h3>Game over!</h3>
    </div>
    <div class="modal-body" >
      <p id="scoreModal">Score:</p>
    </div>
    <div class="modal-footer">
      <a href="#" id="startbutton" rel="modal:close" onclick="startGame()" class="btn btn-primary">Play again!</a>
    </div>
</div>

  
<div class="row">
    <div class="row" id="word">
    </div>

    <div class="container" id="matches">
        <button class="column" id="word0" style="font-size:3vw"></button>
        <button class="column" id="word1" style="font-size:3vw"></button>
        <button class="column" id="word2" style="font-size:3vw"></button>
        <button class="column" id="word3" style="font-size:3vw"></button>
    </div>
</div>
<div class="row">
    <h3 id="score">Score: 0</h3>
</div>

<div class="row">
    <h3 id="timer">10s remaining</h3>
</div>



<script type="text/javascript">

$("button").click(function() {
    // clear colors from all other buttons
    $(".column").css("background-color", "lightyellow");

    var fired_button = $(this).text();
    var curr_word = $("#word").text();
    for (i in dict.words) {
        if (dict.words[i].word === curr_word) {
            //  check if clicked word is correct
            if (dict.words[i].correct === fired_button) {
                $(this).css("background-color", "green");
                // trigger new setup if correct
                setTimeout(function(){
                    newSetup();
                },500);
                var str = $("#score").text();
                var curr_score = str.split(" ").pop();
                console.log('curr score is', curr_score);
                curr_score = Number(curr_score) + 1;
                $("#score").text("Score: " + curr_score);
            }
            else {
                $(this).css("background-color", "red");
            }
        }
    }
});



</script>